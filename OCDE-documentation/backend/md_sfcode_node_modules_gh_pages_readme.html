<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sfcode: gh-pages</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sfcode
   </div>
   <div id="projectbrief">An Online Competing and Development Environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">gh-pages </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Publish files to a <code>gh-pages</code> branch on GitHub (or any other branch anywhere else).</p>
<h1><a class="anchor" id="autotoc_md11307"></a>
Getting Started</h1>
<div class="fragment"><div class="line">npm install gh-pages --save-dev </div>
</div><!-- fragment --><p>This module requires Git <code>&gt;=1.9</code>.</p>
<h1><a class="anchor" id="autotoc_md11308"></a>
Basic Usage</h1>
<div class="fragment"><div class="line">var ghpages = require(&#39;gh-pages&#39;);</div>
<div class="line"> </div>
<div class="line">ghpages.publish(&#39;dist&#39;, function(err) {}); </div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md11309"></a>
&lt;tt&gt;publish&lt;/tt&gt;</h1>
<div class="fragment"><div class="line">ghpages.publish(dir, callback);</div>
<div class="line">// or...</div>
<div class="line">ghpages.publish(dir, options, callback); </div>
</div><!-- fragment --><p>Calling this function will create a temporary clone of the current repository, create a <code>gh-pages</code> branch if one doesn't already exist, copy over all files from the base path, or only those that match patterns from the optional <code>src</code> configuration, commit all changes, and push to the <code>origin</code> remote.</p>
<p>If a <code>gh-pages</code> branch already exists, it will be updated with all commits from the remote before adding any commits from the provided <code>src</code> files.</p>
<p><b>Note</b> that any files in the <code>gh-pages</code> branch that are <em>not</em> in the <code>src</code> files <b>will be removed</b>. See the <a href="#optionsadd"><code>add</code> option</a> if you don't want any of the existing files removed.</p>
<h2><a class="anchor" id="autotoc_md11310"></a>
&lt;a id="dir"&gt;&lt;tt&gt;dir&lt;/tt&gt;&lt;/a&gt;</h2>
<ul>
<li>type: <code>string</code></li>
</ul>
<p>The base directory for all source files (those listed in the <code>src</code> config property).</p>
<p>Example use:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * Given the following directory structure:</div>
<div class="line"> *</div>
<div class="line"> *   dist/</div>
<div class="line"> *     index.html</div>
<div class="line"> *     js/</div>
<div class="line"> *       site.js</div>
<div class="line"> *</div>
<div class="line"> * The usage below will create a `gh-pages` branch that looks like this:</div>
<div class="line"> *</div>
<div class="line"> *   index.html</div>
<div class="line"> *   js/</div>
<div class="line"> *     site.js</div>
<div class="line"> *</div>
<div class="line"> */</div>
<div class="line">ghpages.publish(&#39;dist&#39;, callback); </div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md11311"></a>
Options</h2>
<p>The default options work for simple cases. The options described below let you push to alternate branches, customize your commit messages, and more.</p>
<h3><a class="anchor" id="autotoc_md11312"></a>
&lt;a id="optionssrc"&gt;options.src&lt;/a&gt;</h3>
<ul>
<li>type: <code>string|Array&lt;string&gt;</code></li>
<li>default: &lsquo;&rsquo;**/*'`</li>
</ul>
<p>The <a href="https://github.com/isaacs/minimatch">minimatch</a> pattern or array of patterns used to select which files should be published.</p>
<h3><a class="anchor" id="autotoc_md11313"></a>
&lt;a id="optionsbranch"&gt;options.branch&lt;/a&gt;</h3>
<ul>
<li>type: <code>string</code></li>
<li>default: &lsquo;'gh-pages&rsquo;`</li>
</ul>
<p>The name of the branch you'll be pushing to. The default uses GitHub's <code>gh-pages</code> branch, but this can be configured to push to any branch on any remote.</p>
<p>Example use of the <code>branch</code> option:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * This task pushes to the `master` branch of the configured `repo`.</div>
<div class="line"> */</div>
<div class="line">ghpages.publish(&#39;dist&#39;, {</div>
<div class="line">  branch: &#39;master&#39;,</div>
<div class="line">  repo: &#39;https://example.com/other/repo.git&#39;</div>
<div class="line">}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11314"></a>
&lt;a id="optionsdest"&gt;options.dest&lt;/a&gt;</h3>
<ul>
<li>type: <code>string</code></li>
<li>default: &lsquo;&rsquo;.'`</li>
</ul>
<p>The destination folder within the destination branch. By default, all files are published to the root of the repository.</p>
<p>Example use of the <code>dest</code> option:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * Place content in the static/project subdirectory of the target</div>
<div class="line"> * branch.</div>
<div class="line"> */</div>
<div class="line">ghpages.publish(&#39;dist&#39;, {</div>
<div class="line">  dest: &#39;static/project&#39;</div>
<div class="line">}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11315"></a>
&lt;a id="optionsdotfiles"&gt;options.dotfiles&lt;/a&gt;</h3>
<ul>
<li>type: <code>boolean</code></li>
<li>default: <code>false</code></li>
</ul>
<p>Include dotfiles. By default, files starting with <code>.</code> are ignored unless they are explicitly provided in the <code>src</code> array. If you want to also include dotfiles that otherwise match your <code>src</code> patterns, set <code>dotfiles: true</code> in your options.</p>
<p>Example use of the <code>dotfiles</code> option:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * The usage below will push dotfiles (directories and files)</div>
<div class="line"> * that otherwise match the `src` pattern.</div>
<div class="line"> */</div>
<div class="line">ghpages.publish(&#39;dist&#39;, {dotfiles: true}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11316"></a>
&lt;a id="optionsadd"&gt;options.add&lt;/a&gt;</h3>
<ul>
<li>type: <code>boolean</code></li>
<li>default: <code>false</code></li>
</ul>
<p>Only add, and never remove existing files. By default, existing files in the target branch are removed before adding the ones from your <code>src</code> config. If you want the task to add new <code>src</code> files but leave existing ones untouched, set <code>add: true</code> in your options.</p>
<p>Example use of the <code>add</code> option:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * The usage below will only add files to the `gh-pages` branch, never removing</div>
<div class="line"> * any existing files (even if they don&#39;t exist in the `src` config).</div>
<div class="line"> */</div>
<div class="line">ghpages.publish(&#39;dist&#39;, {add: true}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11317"></a>
&lt;a id="optionsrepo"&gt;options.repo&lt;/a&gt;</h3>
<ul>
<li>type: <code>string</code></li>
<li>default: url for the origin remote of the current dir (assumes a git repository)</li>
</ul>
<p>By default, <code>gh-pages</code> assumes that the current working directory is a git repository, and that you want to push changes to the <code>origin</code> remote.</p>
<p>If instead your script is not in a git repository, or if you want to push to another repository, you can provide the repository URL in the <code>repo</code> option.</p>
<p>Example use of the <code>repo</code> option:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * If the current directory is not a clone of the repository you want to work</div>
<div class="line"> * with, set the URL for the repository in the `repo` option.  This usage will</div>
<div class="line"> * push all files in the `src` config to the `gh-pages` branch of the `repo`.</div>
<div class="line"> */</div>
<div class="line">ghpages.publish(&#39;dist&#39;, {</div>
<div class="line">  repo: &#39;https://example.com/other/repo.git&#39;</div>
<div class="line">}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11318"></a>
&lt;a id="optionsremote"&gt;options.remote&lt;/a&gt;</h3>
<ul>
<li>type: <code>string</code></li>
<li>default: &lsquo;'origin&rsquo;`</li>
</ul>
<p>The name of the remote you'll be pushing to. The default is your &lsquo;'origin&rsquo;` remote, but this can be configured to push to any remote.</p>
<p>Example use of the <code>remote</code> option:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * This task pushes to the `gh-pages` branch of of your `upstream` remote.</div>
<div class="line"> */</div>
<div class="line">ghpages.publish(&#39;dist&#39;, {</div>
<div class="line">  remote: &#39;upstream&#39;</div>
<div class="line">}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11319"></a>
&lt;a id="optionstag"&gt;options.tag&lt;/a&gt;</h3>
<ul>
<li>type: <code>string</code></li>
<li>default: &lsquo;&rsquo;'`</li>
</ul>
<p>Create a tag after committing changes on the target branch. By default, no tag is created. To create a tag, provide the tag name as the option value.</p>
<h3><a class="anchor" id="autotoc_md11320"></a>
&lt;a id="optionsmessage"&gt;options.message&lt;/a&gt;</h3>
<ul>
<li>type: <code>string</code></li>
<li>default: &lsquo;'Updates&rsquo;`</li>
</ul>
<p>The commit message for all commits.</p>
<p>Example use of the <code>message</code> option:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * This adds commits with a custom message.</div>
<div class="line"> */</div>
<div class="line">ghpages.publish(&#39;dist&#39;, {</div>
<div class="line">  message: &#39;Auto-generated commit&#39;</div>
<div class="line">}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11321"></a>
&lt;a id="optionsuser"&gt;options.user&lt;/a&gt;</h3>
<ul>
<li>type: <code>Object</code></li>
<li>default: <code>null</code></li>
</ul>
<p>If you are running the <code>gh-pages</code> task in a repository without a <code>user.name</code> or <code>user.email</code> git config properties (or on a machine without these global config properties), you must provide user info before git allows you to commit. The <code>options.user</code> object accepts <code>name</code> and <code>email</code> string values to identify the committer.</p>
<p>Example use of the <code>user</code> option:</p>
<div class="fragment"><div class="line">ghpages.publish(&#39;dist&#39;, {</div>
<div class="line">  user: {</div>
<div class="line">    name: &#39;Joe Code&#39;,</div>
<div class="line">    email: &#39;coder@example.com&#39;</div>
<div class="line">  }</div>
<div class="line">}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11322"></a>
&lt;a id="optionsuser"&gt;options.remove&lt;/a&gt;</h3>
<ul>
<li>type: <code>string</code></li>
<li>default: &lsquo;&rsquo;.'`</li>
</ul>
<p>Removes files that match the given pattern (Ignored if used together with <code>--add</code>). By default, <code>gh-pages</code> removes everything inside the target branch auto-generated directory before copying the new files from <code>dir</code>.</p>
<p>Example use of the <code>remove</code> option:</p>
<div class="fragment"><div class="line">ghpages.publish(&#39;dist&#39;, {</div>
<div class="line">  remove: &quot;*.json&quot;</div>
<div class="line">}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11323"></a>
&lt;a id="optionspush"&gt;options.push&lt;/a&gt;</h3>
<ul>
<li>type: <code>boolean</code></li>
<li>default: <code>true</code></li>
</ul>
<p>Push branch to remote. To commit only (with no push) set to <code>false</code>.</p>
<p>Example use of the <code>push</code> option:</p>
<div class="fragment"><div class="line">ghpages.publish(&#39;dist&#39;, {push: false}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11324"></a>
&lt;a id="optionshistory"&gt;options.history&lt;/a&gt;</h3>
<ul>
<li>type: <code>boolean</code></li>
<li>default: <code>true</code></li>
</ul>
<p>Push force new commit without parent history.</p>
<p>Example use of the <code>history</code> option:</p>
<div class="fragment"><div class="line">ghpages.publish(&#39;dist&#39;, {history: false}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11325"></a>
&lt;a id="optionssilent"&gt;options.silent&lt;/a&gt;</h3>
<ul>
<li>type: <code>boolean</code></li>
<li>default: <code>false</code></li>
</ul>
<p>Avoid showing repository URLs or other information in errors.</p>
<p>Example use of the <code>silent</code> option:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * This configuration will avoid logging the GH_TOKEN if there is an error.</div>
<div class="line"> */</div>
<div class="line">ghpages.publish(&#39;dist&#39;, {</div>
<div class="line">  repo: &#39;https://&#39; + process.env.GH_TOKEN + &#39;@github.com/user/private-repo.git&#39;,</div>
<div class="line">  silent: true</div>
<div class="line">}, callback); </div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11326"></a>
&lt;a id="optionsgit"&gt;options.git&lt;/a&gt;</h3>
<ul>
<li>type: <code>string</code></li>
<li>default: &lsquo;'git&rsquo;`</li>
</ul>
<p>Your <code>git</code> executable.</p>
<p>Example use of the <code>git</code> option:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * If `git` is not on your path, provide the path as shown below.</div>
<div class="line"> */</div>
<div class="line">ghpages.publish(&#39;dist&#39;, {</div>
<div class="line">  git: &#39;/path/to/git&#39;</div>
<div class="line">}, callback); </div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md11327"></a>
Command Line Utility</h1>
<p>Installing the package creates a <code>gh-pages</code> command line utility. Run <code>gh-pages --help</code> to see a list of supported options.</p>
<p>With a local install of <code>gh-pages</code>, you can set up a package script with something like the following:</p>
<div class="fragment"><div class="line">&quot;scripts&quot;: {</div>
<div class="line">  &quot;deploy&quot;: &quot;gh-pages -d dist&quot;</div>
<div class="line">} </div>
</div><!-- fragment --><p>And then to publish everything from your <code>dist</code> folder to your <code>gh-pages</code> branch, you'd run this:</p>
<div class="fragment"><div class="line">npm run deploy </div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md11328"></a>
Debugging</h1>
<p>To get additional output from the <code>gh-pages</code> script, set <code>NODE_DEBUG=gh-pages</code>. For example:</p>
<div class="fragment"><div class="line">NODE_DEBUG=gh-pages npm run deploy </div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md11329"></a>
Dependencies</h1>
<p>Note that this plugin requires Git 1.9 or higher (because it uses the <code>--exit-code</code> option for <code>git ls-remote</code>). If you'd like to see this working with earlier versions of Git, please <a href="https://github.com/tschaub/gh-pages/issues">open an issue</a>.</p>
<p><a href="https://travis-ci.org/tschaub/gh-pages"><img src="https://secure.travis-ci.org/tschaub/gh-pages.svg?branch=master" alt="Current Status" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md11330"></a>
Tips</h1>
<h2><a class="anchor" id="autotoc_md11331"></a>
when get error &lt;tt&gt;branch already exists&lt;/tt&gt;</h2>
<div class="fragment"><div class="line">{ ProcessError: fatal: A branch named &#39;gh-pages&#39; already exists.</div>
<div class="line"> </div>
<div class="line">    at ChildProcess.&lt;anonymous&gt; (~/node_modules/gh-pages/lib/git.js:42:16)</div>
<div class="line">    at ChildProcess.emit (events.js:180:13)</div>
<div class="line">    at maybeClose (internal/child_process.js:936:16)</div>
<div class="line">    at Process.ChildProcess._handle.onexit (internal/child_process.js:220:5)</div>
<div class="line">  code: 128,</div>
<div class="line">  message: &#39;fatal: A branch named \&#39;gh-pages\&#39; already exists.\n&#39;,</div>
<div class="line">  name: &#39;ProcessError&#39; }</div>
</div><!-- fragment --><p>When processing <code>gh-pages</code> module generate file in&lt;tt&gt;.cache/ and if stuck some reason like wrong password it will not automatically cleanup</p>
<p>Run <code>~node_modules/gh-pages/bin/gh-pages-clean</code> or remove <code>~node_modules/gh-pages/.cache</code> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
